require 'spec_helper'
require 'ronin/model/targets_arch'

require 'model/models/targets_arch_model'

describe Model::TargetsArch do
  subject { TargetsArchModel }
  it "should define an arch relation" do
    relationship = subject.relationships['arch']

    expect(relationship).not_to be_nil
    expect(relationship.parent_model).to eq(Arch)
  end

  it "should define a relationship with Arch" do
    relationship = Arch.relationships['targets_arch_models']

    expect(relationship).not_to be_nil
    expect(relationship.child_model).to eq(subject)
  end

  it "should allow the arch to be set via the getter method" do
    resource = subject.new
    resource.targets_arch :x86

    expect(resource.arch.name).to eq('x86')
  end
end
